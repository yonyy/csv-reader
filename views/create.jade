extends ./layout.jade
block append link
	link(href='sb-admin.css', rel='stylesheet')
block append script
	script(src="classroom.js")
	script(src="readFile.js")
	script(src="student.js")

	script(src="test.js")
	script(src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.0/seedrandom.min.js")
block prepend bodyLink
	body(onload="test()")
block createActive
	li(class="active")
		a(href="/create")
			i(class="fa fa-fw fa-edit")
			|  Create Class
block content
	div(id='page-wrapper', class="pageContainer")
		div(class="container-fluid")
			div(class="row")
				div(class="col-lg-12")
					h1(class="page-header") Create #[small Begin making your own seating chart]
					ol(class="breadcrumb")
						li
							i(class="fa fa-dashboard")
							a(href="/index")  Dashboard
						li(class="active")
							i(class="fa fa-edit")
							|  Create
					p(class="lead") Press "Choose File" to upload a roster (.csv)
					p(class="lead") Enter dimensions for the classroom
			div(class="row")
				div(class="col-md-offset-3 col-lg-6 errorMessage")
			div(class="row")
				form(class="form", name="dimensions", action="/student", method="post", onsubmit="return validateClassroom($('.classType').val())")
					div(class="row")
						div(class="col-lg-6")
							div(class="form-group classroomName")
								label(for="className") Classroom Name
								input(type="text", class="form-control", name="className", id="className")
							div(class="form-group classHeight")
								label(for="heightInsert") Height
								input(type="number", class="form-control", name="height", id="heightInsert", placeholder="10")
							div(class="form-group")
								label(for="widthInsert") Width
								input(type="number", class="form-control", name="width", id="widthInsert", placeholder="12")
							div(class="form-group")
								label(for="classSeed") Seed (Used to generate a random yet repeatable seating chart) [Optional]
								input(type="number", class="form-control", name="seed", id="seedInsert", placeholder="3")
						div(class="col-lg-6")
							div(class="form-group")
								label Existing classrooms
								select(multiple class="form-control existingClass", name="className")
									option(selected="selected" id="op0" value='0') --Select--
									option(id="op1" value='1') WLH 2004
									option(id="op2" value='2') PCYH 124
									option(id="op3" value='3') SOLIS 110
					div(class="row")
						div(class="col-lg-6")
							div(class="form-group")
								label(for="fileInsert") File Input
								input(type="file", accept=".csv", id="fileInsert", name="fileInput", onchange="readUpload()")
						div(class="col-lg-6")
							div(class="form-group")
								label Existing rosters
								select(multiple class="form-control existingRoster", name="fileInput")
									option(selected="selected" id="r0", value='0') --Select--
									option(id="r1" value='1') CSE 15L W14 Section 002
									option(id="r2" value='2') CSE 12 W14 Section 001
					input(type="hidden", name="students", id="students", value="")
					input(type="hidden", name="totalStudents", id="totalStudents", value="")
					input(type="hidden", name="totalGhosts", value = "0")
					input(type="hidden", class="classType", name="classType", value="classroom")
					input(type="hidden", class="classModel", name="classModel", value="")
					div(class="col-md-offset-5                      ")
						button(type="submit", class="btn btn-default submitForm") Submit
				script.
					$('#className, #heightInsert, #widthInsert').keyup(function(){
						if (!$('#className').val() && !$('#heightInsert').val() && !$('#widthInsert').val()) {
							$('.existingClass').attr('disabled', false)
						}
						else {
							$('.existingClass').attr('disabled',true)
						}
					});
					$('#heightInsert, #widthInsert').change(function() {
						if (!$('#className').val() && !$('#heightInsert').val() && !$('#widthInsert').val()) {
							$('.existingClass').attr('disabled', false)
						}
						else {
							$('.existingClass').attr('disabled',true)
						}
					})
					$('.existingClass').change(function(){
						if($(this).val() != 0) {
							$('#className').attr('disabled', true)
							$('#heightInsert').attr('disabled', true)
							$('#widthInsert').attr('disabled', true)
						}
						else {
							$('#className').attr('disabled', false)
							$('#heightInsert').attr('disabled', false)
							$('#widthInsert').attr('disabled', false)
						}
					})
					$('#fileInsert').change(function(){
						if($(this).val() != "") {
							$('.existingRoster').attr('disabled', true)
						}
						else {
							$('.existingRoster').attr('disabled', false)
						} 
					})
					$('.existingRoster').change(function(){
						if($(this).val() != 0) {
							$('#fileInsert').attr('disabled', true)
						}
						else {
							$('#fileInsert').attr('disabled', false)
						} 
					})
					$('.submitForm').click(function() {
						//- sessionStorage.setItem('all_students', JSON.stringify(all_students));
						$('#students').val(JSON.stringify(all_students));
						$('#totalStudents').val(total_students)
						console.log(all_students)
						console.log(total_students)
					})